<html>
<body> 
	<h1 id="title">MusicBrainz APIs</h1>
	<div id="container">
		<h2>Assignment 9</h2>
		<p>The artist name will be used to call the MusicBrainz API for retrieving the album discography from the MusicBrainz database.</p>


		<!-- form for getting user's data		 -->

		<p>Steps:</p>
		<ol>
		<li>Create form to retrieve user's data</li>
		<li>Parse the data from the form to extract the name of the artist</li>
		<li>Determine the MusicBrainz call you have to make to retrieve artists MBIDs. Check <a href="https://musicbrainz.org/doc/Development/XML_Web_Service/Version_2">https://musicbrainz.org/doc/Development/XML_Web_Service/Version_2</a></li>
		<li>Make the HTTP request call. You can make use of the httpGet function in this page</li>
		<li>Parse the response from the server </li>
		<li>Render the data in the browser </li>
		<li>Style the results</li>
		</ol>
        
        <div>
            <h2>Basic call to the MusicBrainz API</h2>
            <p>Retrieve album for a given user-entered artist</p>
    
            <form id="artist"> Artist name?
                <input type="text" name="artist">
                <input type="button" onclick="artistAlbumRetriever()" value="Retrieve album!">
            </form>
        </div>
    
    
        <div id="albumOutput"></div>
    
        <script>
            function httpGet(theUrl) {
                var xmlHttp = new XMLHttpRequest();
                xmlHttp.open("GET", theUrl, false);
                xmlHttp.send();
                return xmlHttp.responseXML;
            }
    
            function artistAlbumRetriever() {
                // Retrieve the data from the form
                artistName = document.getElementById("artist")
                artistnameForm = document.getElementById("artist");
                artistName = artistnameForm.elements["artist"].value;
    
                // Create the Album call
                mbBaseURL = "https://musicbrainz.org/ws/2/";
                mbResource = "artist?query=";
                queryURL = mbBaseURL + mbResource + artistName;
                // console.log(queryURL);
                retrievedData = httpGet(queryURL);
                // console.log(retrievedData)
    
                // Parse the response from MB
                artistData = retrievedData.getElementsByTagName("artist")[0];
                artistAlbum = artistData.id;
                // console.log(artistAlbum);
                artistDocument = retrievedData.getElementById(artistAlbum)
                artistName = artistDocument.getElementsByTagName("name")[0].innerHTML;
                artistAlbum = artistDocument.getElementsByTagName("Album")[0].innerHTML;
                console.log(artistName, artistAlbum);
    
                // Rendering the results
                document.getElementById("artistOutput").innerHTML = artistName + " 's albums are " + artistAlbum;
            }
    
        </script>
        


    <footer class="sticky">
        <div class="container" style="text-align: center">
            <a href="./07-forms.html">Go Home.</a>
        </div>
    </footer>

    </div>
</body>
</html>

